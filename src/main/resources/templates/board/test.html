<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>List</title>
<style>
	.list, .pagination, .pagination+table {
		border-collapse: collapse;
		border-spacing: 0;
		width: 840px;
	}
	
	.list>tbody>tr:nth-child(1)>td {
		text-align: right;
	}
	
	.list>tbody>tr:nth-child(2n+3) {
		background-color: rgb(240, 255, 240);
	}
	
	.list>tbody>tr:nth-child(n+3):hover {
		background-color: rgb(239, 233, 252);
	}
	
	.list>tbody>tr>th {
		border-top: 1px solid #384d75;
		border-bottom: 1px solid #ccc;
		padding: 5px;
	}
	
	.list>tbody>tr>td {
		border-bottom: 1px solid #ccc;
		padding: 5px;
		text-align: center;
	}
	
	.list>tbody>tr>td:nth-child(2) {
		width: 8%;
		text-align: left;
	}
	
	.list a {
		background-color: transparent !important;
		color: #424242 !important;
	}
	
	.list .reply_cnt {
		font-weight: 900;
		color: red;
	}
	
	.list .hot {
		display: inline-block;
		font-weight: bold;
		position: relative;
		animation: hot 1s infinite alternate
	}
	
	.list .new {
		display: inline-block;
		font-weight: bold;
		position: relative;
		left: 7px;
		animation: new 1s infinite alternate
	}
	
	@keyframes hot {from { color:yellow;
		transform: scale(1);
	}
	
	to {
		color: red;
		transform: scale(1.05);
	}
	
	}
	@keyframes new {from { color:yellow;
		transform: scale(1);
	}
	
	to {
		color: orange;
		transform: scale(1.05);
	}
	
	}
	
	.pagination a {
		padding: 5px;
		width: 20px;
		height: 20px;
	}
	
	.pagination a:hover {
		background-color: rgb(198, 175, 245);
	}
	
	.nowPage {
		padding: 5px;
		width: 20px;
		height: 20px;
		display: inline-block;
		border-radius: 3px;
		background-color: rgb(198, 175, 245);
		color: #fff;
		font-weight: bold;
	}
	
	a.write {
		padding: 5px;
		width: 70px;
		height: 25px;
		text-align: center;
	}
	
	.search_area {
		text-align: center;
		vertical-align: middle;
		width: 840px;
	}
	.search_area select{
		width: 185px;
		padding: 10px 20px;
		border: 2px solid rgb(0, 200, 80);
		outline:none;
		-moz-appearance: none;
		-webkit-appearance: none;
		appearance: none;
		background:url("/board/images/icon.png") no-repeat -490px -335px;
	}
	.search_area #keyword {
		outline: none;
		border: 2px solid rgb(0, 200, 80);
		border-radius: 3px;
		width: 300px;
		padding: 10px;
	}
	
	.search_area a {
		background-color: rgb(0, 200, 80);
		width: 70px;
		padding: 10px;
		display: inline-block;
		border: 1px solid rgb(0, 200, 80);
		position: relative;
		top: 1.5px;
		border-radius: 3px;
		color: #fff;
		font-weight: bold;
	}
	/* chat */
	#chat-circle {
		box-sizing: border-box;
		position: fixed;
		bottom: 25px;
		right: 25px;
		background: #43a047;
		width: 60px;
		height: 60px;
		border-radius: 50%;
		color: white;
		padding: 18px;
		font-size: 20px; cursor : pointer;
		box-shadow: 0px 3px 16px 0px rgba(0, 0, 0, 0.6), 0 3px 1px -2px
			rgba(0, 0, 0, 0.2), 0 1px 5px 0 rgba(0, 0, 0, 0.12);
		cursor: pointer;
	}
	
	.btn#my-btn {
		background: white;
		padding-top: 13px;
		padding-bottom: 12px;
		border-radius: 45px;
		padding-right: 40px;
		padding-left: 40px;
		color: #5865C3;
	}
	
	#chat-overlay {
		background: rgba(255, 255, 255, 0.1);
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		border-radius: 50%;
		display: none;
	}
	
	.chat-box {
		display: none;
		background: #efefef;
		position: fixed;
		right: 30px;
		bottom: 50px;
		width: 350px;
		max-width: 85vw;
		max-height: 100vh;
		border-radius: 5px;
		/*   box-shadow: 0px 5px 35px 9px #464a92; */
		box-shadow: 0px 5px 35px 9px #ccc;
	}
	
	.chat-box-toggle {
		float: right;
		margin-right: 15px;
		cursor: pointer;
	}
	
	.chat-box-header {
		background: #43a047;
		height: 27px;
		border-top-left-radius: 5px;
		border-top-right-radius: 5px;
		color: white;
		text-align: center;
		font-size: 20px;
		padding: 17px 0;
	}
	
	.chat-box-body {
		position: relative;
		height: auto;
		border: 1px solid #ccc;
		overflow: hidden;
	}
	
	.chat-box-body:after {
		content: "";
		background-image:
			url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTAgOCkiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PGNpcmNsZSBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMS4yNSIgY3g9IjE3NiIgY3k9IjEyIiByPSI0Ii8+PHBhdGggZD0iTTIwLjUuNWwyMyAxMW0tMjkgODRsLTMuNzkgMTAuMzc3TTI3LjAzNyAxMzEuNGw1Ljg5OCAyLjIwMy0zLjQ2IDUuOTQ3IDYuMDcyIDIuMzkyLTMuOTMzIDUuNzU4bTEyOC43MzMgMzUuMzdsLjY5My05LjMxNiAxMC4yOTIuMDUyLjQxNi05LjIyMiA5LjI3NC4zMzJNLjUgNDguNXM2LjEzMSA2LjQxMyA2Ljg0NyAxNC44MDVjLjcxNSA4LjM5My0yLjUyIDE0LjgwNi0yLjUyIDE0LjgwNk0xMjQuNTU1IDkwcy03LjQ0NCAwLTEzLjY3IDYuMTkyYy02LjIyNyA2LjE5Mi00LjgzOCAxMi4wMTItNC44MzggMTIuMDEybTIuMjQgNjguNjI2cy00LjAyNi05LjAyNS0xOC4xNDUtOS4wMjUtMTguMTQ1IDUuNy0xOC4xNDUgNS43IiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMS4yNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+PHBhdGggZD0iTTg1LjcxNiAzNi4xNDZsNS4yNDMtOS41MjFoMTEuMDkzbDUuNDE2IDkuNTIxLTUuNDEgOS4xODVIOTAuOTUzbC01LjIzNy05LjE4NXptNjMuOTA5IDE1LjQ3OWgxMC43NXYxMC43NWgtMTAuNzV6IiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMS4yNSIvPjxjaXJjbGUgZmlsbD0iIzAwMCIgY3g9IjcxLjUiIGN5PSI3LjUiIHI9IjEuNSIvPjxjaXJjbGUgZmlsbD0iIzAwMCIgY3g9IjE3MC41IiBjeT0iOTUuNSIgcj0iMS41Ii8+PGNpcmNsZSBmaWxsPSIjMDAwIiBjeD0iODEuNSIgY3k9IjEzNC41IiByPSIxLjUiLz48Y2lyY2xlIGZpbGw9IiMwMDAiIGN4PSIxMy41IiBjeT0iMjMuNSIgcj0iMS41Ii8+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTkzIDcxaDN2M2gtM3ptMzMgODRoM3YzaC0zem0tODUgMThoM3YzaC0zeiIvPjxwYXRoIGQ9Ik0zOS4zODQgNTEuMTIybDUuNzU4LTQuNDU0IDYuNDUzIDQuMjA1LTIuMjk0IDcuMzYzaC03Ljc5bC0yLjEyNy03LjExNHpNMTMwLjE5NSA0LjAzbDEzLjgzIDUuMDYyLTEwLjA5IDcuMDQ4LTMuNzQtMTIuMTF6bS04MyA5NWwxNC44MyA1LjQyOS0xMC44MiA3LjU1Ny00LjAxLTEyLjk4N3pNNS4yMTMgMTYxLjQ5NWwxMS4zMjggMjAuODk3TDIuMjY1IDE4MGwyLjk0OC0xOC41MDV6IiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMS4yNSIvPjxwYXRoIGQ9Ik0xNDkuMDUgMTI3LjQ2OHMtLjUxIDIuMTgzLjk5NSAzLjM2NmMxLjU2IDEuMjI2IDguNjQyLTEuODk1IDMuOTY3LTcuNzg1LTIuMzY3LTIuNDc3LTYuNS0zLjIyNi05LjMzIDAtNS4yMDggNS45MzYgMCAxNy41MSAxMS42MSAxMy43MyAxMi40NTgtNi4yNTcgNS42MzMtMjEuNjU2LTUuMDczLTIyLjY1NC02LjYwMi0uNjA2LTE0LjA0MyAxLjc1Ni0xNi4xNTcgMTAuMjY4LTEuNzE4IDYuOTIgMS41ODQgMTcuMzg3IDEyLjQ1IDIwLjQ3NiAxMC44NjYgMy4wOSAxOS4zMzEtNC4zMSAxOS4zMzEtNC4zMSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjEuMjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPjwvZz48L3N2Zz4=');
		opacity: 0.1;
		top: 0;
		left: 0;
		bottom: 0;
		right: 0;
		height: 100%;
		position: absolute;
		z-index: -1;
	}
	
	.chat-input {
		width: 350px;
	}
	
	#chat-input {
		box-sizing: border-box;
		width: 299px;
		position: relative;
		height: 46px;
		padding-top: 10px;
		padding-right: 50px;
		padding-bottom: 10px;
		padding-left: 15px;
		border: none;
		resize: none;
		outline: none;
		color: #888;
		overflow: hidden;
		border-bottom-right-radius: 5px;
		border-bottom-left-radius: 5px;
		background: #f4f7f9;
	}
	
	#chat-input.echo {
		color: deeppink;
		width: 299px;
	}
	
	.echo-receiver {
		display: inline-block;
		width: 0;
		font-size: 12px;
		color: deeppink;
		line-height: 46px;
		cursor: pointer;
	}
	
	.chat-input>form {
		box-sizing: border-box;
		margin-bottom: 0;
		border: 1px solid #ccc;
		border-top: none;
		border-bottom-right-radius: 5px;
		border-bottom-left-radius: 5px;
		background: #f4f7f9;
	}
	
	#chat-input::-webkit-input-placeholder{
		/* Chrome/Opera/Safari */
		color : #ccc;
	}
	#chat-input::-moz-placeholder{
		/* Firefox 19+ */
		color : #ccc;
	}
	#chat-input:-ms-input-placeholder{
		/* IE 10+ */
		color : #ccc;
	}
	#chat-input:-moz-placeholder{
		/* Firefox 18- */
		color : #ccc;
	}
	.chat-submit{
		position : absolute;
		bottom : 6px;
		right : 10px;
		background : transparent;
		box-shadow : none;
		border : none;
		border-radius : 50%;
		color : #43a047;
		width : 35px;
		height : 35px;
		cursor : pointer;
	}
	.chat-submit:hover {
		color : white;
		background : #43a047;
	}
	.chat-logs {
		padding : 15px;
		height : 370px;
		overflow-y : scroll;
	}
	.chat-logs::-webkit-scrollbar-track {
		-webkit-box-shadow : inset 0 0 6px rgba(0, 0, 0, 0.3);
		background-color : #F5F5F5;
	}
	.chat-logs::-webkit-scrollbar {
		width : 5px;
		background-color : #F5F5F5;
	}
	.chat-logs::-webkit-scrollbar-thumb {
		background-color : #43a047;
	}
	@media only screen and (max-width: 500px) {
		.chat-logs {
			height: 40vh;
		}
	}
	
	#chat-input::-webkit-input-placeholder { /* Chrome/Opera/Safari */
		color: #ccc;
	}
	
	#chat-input::-moz-placeholder { /* Firefox 19+ */
		color: #ccc;
	}
	
	#chat-input:-ms-input-placeholder { /* IE 10+ */
		color: #ccc;
	}
	
	#chat-input:-moz-placeholder { /* Firefox 18- */
		color: #ccc;
	}
	
	.chat-submit {
		position: absolute;
		bottom: 6px;
		right: 10px;
		background: transparent;
		box-shadow: none;
		border: none;
		border-radius: 50%;
		color: #43a047;
		width: 35px;
		height: 35px;
		cursor: pointer;
	}
	
	.chat-submit:hover {
		color: white;
		background: #43a047;
	}
	
	.chat-logs {
		padding: 15px;
		height: 370px;
		overflow-y: scroll;
	}
	
	.chat-logs::-webkit-scrollbar-track {
		-webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);
		background-color: #F5F5F5;
	}
	
	.chat-logs::-webkit-scrollbar {
		width: 5px;
		background-color: #F5F5F5;
	}
	
	.chat-logs::-webkit-scrollbar-thumb {
		background-color: #43a047;
	}
	.chat-logs .inout-Msg{
		font-size:10px;
		padding:2px 5px;
		border-radius: 200px;
		background-color:rgba(0,0,0,0.05);
		text-align:center;
		clear:both;
		margin-bottom:10px;
	}
	
	@media only screen and (max-width:500px){
		.chat-logs {
			height : 40vh;
		}
	}
	.receiver {
		float: right;
		font-size: 10px;
		margin-top: 20px;
	}
	
	.receiver.echo {
		color: deeppink;
	}
	.user .receiver, .echo:not(.self) .receiver{
		float:left;
		margin-left:10px;
	}
	
	.chat-msg.user>.msg-avatar img {
		width: 45px;
		height: 45px;
		border-radius: 50%;
		float: left;
		width: 15%;
	}
	
	.chat-msg.echo>.msg-avatar img {
		width: 45px;
		height: 45px;
		border-radius: 50%;
		float: left;
		width: 15%;
	}
	
	.chat-msg.self>.msg-avatar img {
		width: 45px;
		height: 45px;
		border-radius: 50%;
		float: right;
		/* width:15%; */
	}
	
	.cm-msg-text {
		background: white;
		padding: 10px 15px 10px 15px;
		color: #666;
		max-width: 55%;
		float: left;
		margin-left: 10px;
		position: relative;
		margin-bottom: 20px;
		border-radius: 30px;
	    word-break: break-all;
	    white-space:pre;
	    display: inline-block;
	}
	
	.chat-msg {
		clear: both;
	}
	
	.chat-msg.echo>.cm-msg-text {
		background: hotpink;
		color: white;
	}
	
	.chat-msg.self>.cm-msg-text {
		float: right;
		margin-right: 10px;
		background: #43a047;
		color: white;
	}
	.chat-msg.self.echo>.cm-msg-text{
		color:white;
		background: hotpink;
	}
	
	.cm-msg-button>ul>li {
		list-style: none;
		float: left;
		width: 50%;
	}
	
	.cm-msg-button {
		clear: both;
		margin-bottom: 70px;
	}
</style>
<link rel="stylesheet" th:href="@{/board/css/layout.css}">
</head>
<body>
	<div class="wrap">
		<!-- 게시글 리스트 띄우는 테이블 -->
		<table class="list">
			<tr align="right" valign="middle">
				<td colspan="6">글 개수 : [[${pageMaker.total}]]</td>
			</tr>
			<tr align="center" valign="middle">
				<th width="8%">번호</th>
				<th></th>
				<th>제목</th>
				<th width="15%">작성자</th>
				<th width="17%">날짜</th>
				<th width="10%">조회수</th>
			</tr>
			<tr th:if="${list != null and list.size()>0}" th:each="board : ${list}">
				<td>[[${board.boardnum}]]</td>
				<td>
					<sup class="hot" th:if="${recent_reply[boardStat.index] == 'O'}">Hot</sup>
					<sup class="new" th:if="${newly_board[boardStat.index] == 'O'}">New</sup>
				</td>
				<td>
					<a class="get" th:href="${board.boardnum}">
						[[${board.boardtitle}]]
						<span class="reply_cnt" th:text="'['+${reply_cnt_list[boardStat.index]}+']'"></span>
					</a>
				</td>
				<td>[[${board.userid}]]</td>
				<td>
					[[${board.regdate}]]
					<th:block th:if="${board.regdate != board.updatedate}">
					(수정됨)
					</th:block>
				</td>
				<td>[[${board.readcount}]]</td>
			</tr>
			<th:block th:if="${list == null or list.size() == 0}">
				<tr>
					<td colspan="6" style="text-align: center; font-size: 20px;">등록된
						게시글이 없습니다.</td>
				</tr>
			</th:block>
		</table>
		<br>
		<!-- 페이징 처리하는 테이블 -->
		<table class="pagination">
			<tr align="center" valign="middle">
				<td>
					<a class="changePage" th:if="${pageMaker.prev}" th:href="${pageMaker.startPage-1}">&lt;</a>
					<th:block th:each="i : ${#numbers.sequence(pageMaker.startPage,pageMaker.endPage)}">
						<span class="nowPage" th:text="${i}" th:if="${pageMaker.cri.pagenum == i}"></span>
						<a class="changePage" th:href="${i}" th:text="${i}" th:unless="${pageMaker.cri.pagenum == i}"></a>
					</th:block>
					<a class="changePage" th:if="${pageMaker.next}" th:href="${pageMaker.endPage+1}">&gt;</a>
				</td>
			</tr>
		</table>
		<!-- 글쓰기 버튼 배치하는 테이블 -->
		<table>
			<tr align="right" valign="middle">
				<td>
					<a class="write" th:href="${'/board/write'+pageMaker.cri.listLink}">글쓰기</a>
				</td>
			</tr>
		</table>
		<form id="searchForm" th:action="@{/board/list}">
			<div class="search_area">
				<select name="type">
					<option value="" th:selected="${pageMaker.cri.type == null}">검색</option>
					<option value="T" th:selected="${pageMaker.cri.type == 'T'}">제목</option>
					<option value="C" th:selected="${pageMaker.cri.type == 'C'}">내용</option>
					<option value="W" th:selected="${pageMaker.cri.type == 'W'}">작성자</option>
					<option value="TC" th:selected="${pageMaker.cri.type == 'TC'}">제목 또는 내용</option>
					<option value="TW" th:selected="${pageMaker.cri.type == 'TW'}">제목 또는 작성자</option>
					<option value="TCW" th:selected="${pageMaker.cri.type == 'TCW'}">제목 또는 내용 또는 작성자</option>
				</select>
				<input type="text" name="keyword" id="keyword" th:value="${pageMaker.cri.keyword}">
				<a href="#" class="button primary">검색</a>
			</div>
			<input type="hidden" value="1" name="pagenum">
			<input type="hidden" value="10" name="amount">
		</form>
	</div>
	<div id="chat-circle" class="btn btn-raised">
		<div id="chat-overlay"></div>
		<span class="material-symbols-outlined">speaker_phone</span>
	</div>
	<div class="chat-box">
		<div class="chat-box-header">
			사용자 채팅 <span class="chat-box-toggle"><span
				class="material-symbols-outlined">close</span></span>
		</div>
		<div class="chat-box-body">
			<div class="chat-box-overlay"></div>
			<div class="chat-logs"></div>
			<!--chat-log -->
		</div>
		<div class="chat-input">
			<form>
				<input type="hidden" id="userid" name="userid" th:value="${session.loginUser}">
				<span class="echo-receiver"></span> <input type="text"
					id="chat-input" placeholder="Send a message..."
					onkeyup="sendEcho();" />
				<button type="submit" class="chat-submit" id="chat-submit">
					<span class="material-symbols-outlined">send</span>
				</button>
			</form>
		</div>
	</div>
	<form name="pageForm" id="pageForm" th:action="@{/board/list}">
		<input type="hidden" name="pagenum" th:value="${pageMaker.cri.pagenum}">
		<input type="hidden" name="amount" th:value="${pageMaker.cri.amount}">
		<input type="hidden" name="type" th:value="${pageMaker.cri.type}">
		<input type="hidden" name="keyword" th:value="${pageMaker.cri.keyword}">
	</form>
</body>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script th:inline="javascript">
	const searchForm = $("#searchForm");
	const pageForm = $("#pageForm");
	
	$(".changePage").on("click",function(e){
		//e(이벤트)의 기본 작동 막기
		e.preventDefault();
		let pagenum = $(this).attr("href");
		pageForm.find("input[name='pagenum']").val(pagenum);
		pageForm.submit();
	});
	$(".get").on("click",function(e){
		e.preventDefault();
		let boardnum = $(this).attr("href");
		let url=/*[[@{/board/get}]]*/'';
		pageForm.append("<input type='hidden' name='boardnum' value='"+boardnum+"'>")
		pageForm.attr("action",url);
		pageForm.attr("method","get");
		pageForm.submit();
	})
	
	$("#searchForm a").on("click",sendit);
	function sendit(){
		if(!searchForm.find("option:selected").val()){
			alert("검색 기준을 선택하세요!");
			return false;
		}
		if(!$("input[name='keyword']").val()){
			alert("키워드를 입력하세요!");
			return false;
		}
		searchForm.submit();
	}
</script>
</html>













