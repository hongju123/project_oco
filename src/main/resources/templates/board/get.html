<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>ComuGet</title>

<link rel="stylesheet" th:href="@{/main/css/common.css}">
<link rel="stylesheet" th:href="@{/main/css/slick.css}">
<link rel="stylesheet" th:href="@{/main/css/slick-theme.css}">
<link rel="stylesheet" th:href="@{/main/css/main.css}">
</head>	
<body>
	<div id="cumuwrap">
		<form>
			<table style="border-collapse: collapse;" border="1" class="border-area">
				<tr style="height:30px;">
					<th style="text-align:center; width:150px;">제목</th>
					<td>
						<input type="text" name="boardtitle" size="50" maxlength="50" th:value="${board.boardtitle}" readonly>
					</td>
				</tr>
				<tr style="height:30px;">
					<th style="text-align:center; width:150px;">작성자</th>
					<td>
						<input type="text" name="userid" size="50" maxlength="50" th:value="${board.userid}" readonly>
					</td>
				</tr>
				<tr>
					<th>조회수</th>
					<td>[[${board.readCount}]]</td>
				</tr>
				<tr style="height:300px;">
					<th style="text-align:center; width:150px;">내 용</th>
					<td>
						<textarea name="boardcontents" style="width:700px;height:290px;resize:none;" readonly>[[${board.boardcontents}]]</textarea>
					</td>
				</tr>
				<th:block th:if="${files != null and files.size() > 0}" th:each="file : ${files}">
					<th:block th:with="sar=${file.orgname.split('[.]')}">
						<tr>
							<th>첨부파일[[${fileStat.index+1}]]</th>
							<td>
								<a href="#">[[${file.orgName}]]</a>
							</td>
						</tr>
						<th:block th:with="ext=${sar[sar.length-1]}">
							<tr th:if="${ext == 'jpg' or ext == 'jpeg' or ext == 'png' or ext == 'gif' or ext == 'webp'}">
								<td></td>
								<td>
									<img style="width:100%;" th:src="@{/board/thumbnail (systemname=${file.systemname})}">
								</td>
							</tr>
						</th:block>
					</th:block>
				</th:block>
				<th:block th:unless="${files != null and files.size() > 0}">
					<tr>
						<td colspan="2" style="text-align: center; font-size: 20px;">첨부 파일이 없습니다.</td>
					</tr>
				</th:block>
			</table>
		</form>
		<table class="btn_area">
			<tr align="right" valign="middle">
				<td>
					<th:block th:if="${board.userid == session.loginUser}">
						<form name="boardForm" method="post" th:action="@{/board/remove}">
							<input name="boardnum" th:value="${board.boardnum}" type="hidden">
							<input name="pagenum" th:value="${cri.pagenum}" type="hidden">
							<input name="amount" th:value="${cri.amount}" type="hidden">
							<input name="type" th:value="${cri.type}" type="hidden">
							<input name="keyword" th:value="${cri.keyword}" type="hidden">
							<a href="javascript:modify()">수정</a>
							<a href="">삭제</a>
						</form>
					</th:block>
					<a th:href="${'/board/list'+cri.listLink}">목록</a>
				</td>
			</tr>
		</table>
		<div class="reply_line">
			<a href="#" class="regist">댓글 등록</a>
			<div class="replyForm row">
				<div style="width:20%">
					<h4>작성자</h4>
					<input type="text" name="userid" th:value="${session.loginUser}" readonly style="text-align: center;">
				</div>
				<div style="width:65%">
					<h4>내 용</h4>
					<textarea name="replycontents" placeholder="Contents" style="resize:none;"></textarea>
				</div>
				<div style="width:15%">
					<a href="#" class="button finish" style="margin-bottom:1rem;">등록</a>
					<a href="#" class="button cancel">취소</a>
				</div>
			</div>
			<ul class="replies"></ul>
			<div class="page"></div>
		</div>
	</div>
	<th:block th:replace="~{layout/footer::footer}"></th:block>
</body>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script th:inline="javascript">
	function modify(){
		const boardForm = document.boardForm;
		boardForm.setAttribute("action",/*[[@{/board/modify}]]*/'');
		boardForm.setAttribute("method","get");
		boardForm.submit();
	}
</script>
</html>