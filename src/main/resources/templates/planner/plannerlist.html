<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
	<title>플래너 리스트</title>
</head>
<link rel="stylesheet" th:href="@{/main/css/common.css}">
<link rel="stylesheet" th:href="@{/main/css/slick.css}">
<link rel="stylesheet" th:href="@{/main/css/slick-theme.css}">
<link rel="stylesheet" th:href="@{/main/css/main.css}">
<link rel="stylesheet" th:href="@{/reservation/css/write.css}">
<link rel="stylesheet" th:href="@{/main/css/sub.css}">
<body>
	<th:block th:replace="~{layout/header::header}"></th:block>
	<div class="wrap">
		<th:block th:replace="~{layout/subVisual::subVisual}"></th:block>
		<div class="sub-inner">
			<div class="sub-tit">
				<h2 data-aos="fade-up">플래너로<br> 내 여행을 더 쉽게<br> <strong>관리하세요!</strong></h2>
			</div><!--.sub-tit-->
			<div class="depth2-wrap" data-aos="fade-up">
			  <ul class="depth2 sub-nav">
			    <li class="active"><a th:href="@{/planner/map}">플래너 만들기</a></li>
	            <li><a th:href="@{/planner/plannerlist}">플래너 보기</a></li>
			  </ul>
			</div>
			<a th:href="${'/planner/map'}">플래너 작성</a>
			<table class="list">
				<tr align="right" valign="middle">
				</tr>
				<tr align="center" valign="middle">
					<th width="8%">날짜</th>
					<th>가게명</th>
					<th>주소</th>
					<th width="15%">메모</th>
				</tr>
				<tr th:if="${list != null and list.size()>0}" th:each="planner : ${list}" align="center" valign="middle">
					<th:block th:if="${planner.userId == session.loginUser}">
						<td><a class="get" th:href="${planner.scheduleNum}">[[${planner.scheduleDate}]]</a></td>
						<td>[[${planner.storeName}]]</td>
						<td>[[${planner.addr}]]</td>
						<td>[[${planner.memo}]]</td>
					</td>
					<!--사업자로그인 일떄 볼 리스트는 모든 유저의 게시글-->
				</tr>
				<th:block th:if="${list == null or list.size() == 0}">
					<tr>
						<td colspan="6" style="text-align: center; font-size: 20px;">등록된
							게시글이 없습니다.</td>
					</tr>
				</th:block>
			</table>
			<form name="getForm" id="getForm" th:action="@{/planner/plannerlist}"></form>
		</div><!--.sub-inner-->
	</div><!--.wrap-->
	<th:block th:replace="~{layout/footer::footer}"></th:block>
</body>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script type="text/javascript" th:src="@{/main/js/jquery-3.6.0.min.js}"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.0/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.0/ScrollTrigger.min.js"></script>
<script type="text/javascript" th:src="@{/main/js/slick.min.js}"></script>
<script type="text/javascript" th:src="@{/main/js/common.js}"></script>
<script type="text/javascript" th:src="@{/main/js/main.js}"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-111023863-1"></script>
<script th:src="@{/reservation/js/write.js}"></script>
<script th:inline="javascript">
	
	const getForm = $("#getForm");
	$(".get").on("click",function(e){
		e.preventDefault()
		let scheduleNum = $(this).attr("href");
		let url=/*[[@{/planner/plannerget}]]*/'';
		getForm.append("<input type='hidden' name='scheduleNum' value='"+scheduleNum+"'>")
		getForm.attr("action",url);
		getForm.attr("method","get");
		getForm.submit();
	})
	
</script>
</html>